# AFML笔记1: Data Preprocessing

周末抽空看了这本著名的书的前几章，感觉还是有点体会的。结合我自己在做的工作总结一下：
1. 书的前几章主要讲了如何对金融数据进行基本处理，转换为可以进行机器学习的格式。确实，对机器学习来说，输入的数据甚至比模型、调参等等更加重要。
2. 首先对从交易所得到的tick数据，需要聚合成bar。一般来说聚合成time bar就挺好，复杂一点可以考虑聚合成 volume bar,dollar bar， 主要是为了时序上的平稳。更加复杂的事件驱动型的bar也有，但是一般不会用到，除非是很特殊的标的。不过这部分我的工作并没有涉及到，我是直接使用time bar的数据。
3. 将数据聚合成bar后，也不能直接一股脑全塞到模型中，最好是根据某个事件的累计发生次数进行抽样（cumsum method）。
4. labelling issue：我一般就直接使用收益率做回归模型了，但是书中建议的是用-1，0，1做分类模型，使用triple-barrier method，外加根据收益率波动率动态调整的horizon threshold。另外，可以考虑meta label。
5. sample weight：训练模型的样本权重。这块主要解决的是金融数据样本之间不是iid的问题。不过这里个人理解一般是针对非time bar的情况。金融数据的标签是rolling return得到的，具有时序上的相关性。
6. 差分的问题。作者说使用一阶差分确实可以在时序上平稳，但是会损失过多的predictive power，所以建议根据ADF test的结果选择一个可以保证时序平稳但是又比较小的。
7. 小数差分d，这样就不会损失预测能力。这点我觉得可以和labelling结合，用分数阶差分替代收益率作为label。


